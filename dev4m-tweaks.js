(()=>{"use strict";const t={AAA:"https://cdn.discordapp.com/emojis/626147013070684161.gif?v=1",thonk_smile:"https://cdn.discordapp.com/emojis/451214432131874837.png?v=1",flushing:"https://cdn.discordapp.com/emojis/808498786279882762.gif?v=1",flusheando:"https://cdn.discordapp.com/emojis/808498786279882762.gif?v=1",ice_cube_neutral:"https://cdn.discordapp.com/emojis/817498095959932993.png?v=1",xdd:"https://cdn.discordapp.com/emojis/408457517832732675.png?v=1",xd:"https://cdn.discordapp.com/emojis/408457388144853004.png?v=1",bit_bobux:"https://cdn.discordapp.com/emojis/817483409324113930.png?v=1",pensive_splash:"https://cdn.discordapp.com/emojis/591821888175603713.gif?v=1",premium:"https://cdn.discordapp.com/emojis/614587108350492702.png?v=1"};function e(e){e.addEventListener("input",(()=>{e.value=e.value.replace(/:(.*?):/,((e,s)=>{const n=t[s];return n?`<img src="${n}" width=20 height=20 title=":${s}:">`:`:${s}:`}))}))}function s(t,e){return`<span style="border: 2px solid ${e};border-radius: 10000px;padding: 2px 8px;font-size: 10px;">\n${t}</span>`.replace("\n","")}const n='"http://www.w3.org/2000/svg"',o='"color:#009FFF !important"',a='"color:#e7c300 !important"',r={op:s("OP","green"),visitor:s("VISITOR (TL0)","#95A5A6"),member:s("MEMBER (TL1)","#68D1F1"),regular:s("REGULAR (TL2)","#4B9CFA"),editor:s("EDITOR (TL3)","#AC96EC"),leader:s("LEADER (TL4)","#D7C7FF"),bobox:s("BOBUX MAN","#00B7F6"),godefficients:s("GODEFFICIENTS","#8119d1"),suspended:`<span title="Suspended">\n<svg class="fa d-icon d-icon-ban svg-icon svg-string" xmlns=${n} style="color:#e45735 !important">\n<use xlink:href="#ban"></use></svg></span>`.replace("\n"," "),extensiondev:`<span title="dev4m-tweaks Developer">\n<svg class="fa d-icon d-icon-code svg-icon svg-string" xmlns=${n} style=${o}>\n<use xlink:href="#code"></use></svg></span>`.replace("\n"," "),extensioncont:`<span title="dev4m-tweaks Contributor">\n<svg class="fa d-icon d-icon-desktop svg-icon svg-string" xmlns=${n} style=${o}>\n<use xlink:href="#desktop"></use></svg></span>`.replace("\n"," "),top:`<span title="Top Contributor">\n<svg class="fa d-icon d-icon-arrow-up svg-icon svg-string" xmlns=${n} style=${a}>\n<use xlink:href="#arrow-up"></use></svg></span>`.replace("\n"," "),sage:`<span title="Sage">\n<svg class="fa d-icon d-icon-users svg-icon svg-string" xmlns=${n} style=${a}>\n<use xlink:href="#users"></use></svg></span>`.replace("\n"," "),editor2:`<span title="Editor">\n<svg class="fa d-icon d-icon-user-check svg-icon svg-string" xmlns=${n} style=${a}>\n<use xlink:href="#user-check"></use></svg></span>`.replace("\n"," ")},i={1311:"bobox",112950:"godefficients",34253:"extensiondev",399427:"extensioncont"},c={102:"top",103:"sage",104:"editor2"},l={},d={},u={tl0:[],tl1:[],tl2:[],tl3:[],tl4:[]},p=["visitor","member","regular","editor","leader"];let f=[],g=[],m={},v=[];const h={method:"GET"},b="-!--user-flaired ",x="-!--user-has-dm-bttn";function w(t,e){for(const s of t.childNodes)if(s.classList.contains(e))return s;return null}function E(t,e){let s;for(let e of t.getElementsByClassName("row"))if(s=w(e,"topic-body"),s)break;const n=w(s,"regular"),o=w(n,"cooked");if("staff"==e){if(t.parentElement.classList.contains("moderator"))return;t.parentElement.className+=" moderator"}"local"==e&&(o.style.background="var(--tertiary-very-low)")}function y(t,e){const s=r[e];let n;for(let e of t.getElementsByClassName("row"))if(n=w(e,"topic-body"),n)break;const o=w(n,"topic-meta-data");w(o,"names").innerHTML+=s}function $(t){!function(t){t.parentElement.classList.contains("topic-owner")&&(t.classList.contains("-!-has-op-flairs")||(y(t,"op"),t.className+=" -!-has-op-flairs"))}(t),async function(t){if(t.classList.contains(b))return;if(t.classList.contains(x))return;t.className+=` ${b}`,t.className+=` ${x}`;const e=t.getAttribute("data-user-id"),s=t.getAttribute("data-post-id");if(null===s)return;const{trustLevel:n,userInfo:o}=await async function(t,e){const s={};for(let e=0;e<5;e++)if(-1!==u[`tl${e}`].indexOf(t)){s.trustLevel=p[e];break}const n=await fetch(`https://devforum.roblox.com/posts/${e}.json`,h);if(!n.ok)return console.log(n.statusText),{error:n};const o=await n.blob(),a=JSON.parse(await o.text());return u[`tl${a.trust_level}`].push(t),s.trustLevel=p[a.trust_level],s.userInfo=a,s}(e,s).catch(console.log);let a,r=!1;o&&(r=await async function(t,e){if(-1!==f.indexOf(t))return!0;if(-1!==g.indexOf(t))return!1;const s=await fetch(`https://devforum.roblox.com/u/${e.username}.json`,h);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.blob();return JSON.parse(await n.text()).user.suspended_till?(f.push(t),!0):(g.push(t),!1)}(t.getAttribute("data-user-id"),o).catch(console.log)),o&&(a=await async function(t,e){if(m[t])return m[t];if(-1!==v.indexOf(t))return!1;const s=await fetch(`https://devforum.roblox.com/u/${e.username}.json`,h);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.blob(),o=JSON.parse(await n.text()),a=[];if(Object.keys(o.badges).forEach((function(t){c[o.badges[t].id]&&(a[o.badges[t].id]||a.push(o.badges[t].id))})),0===a.length)return v.push(t),!1;var r=Math.max.apply(Math,a);return r?(m[t]=[c[r]],c[r]):void 0}(t.getAttribute("data-user-id"),o).catch(console.log)),n&&y(t,n),a&&y(t,a),r&&y(t,"suspended"),o.yours?E(t,"local"):function(t,e){let s;for(let e of t.getElementsByClassName("row"))if(s=w(e,"topic-body"),s)break;const n=w(s,"regular"),o=w(n,"post-menu-area"),a=w(o,"post-controls"),r=w(a,"actions"),i='<button class="widget-button btn-flat envelope no-text btn-icon" title="message post author">\n\t<svg class="fa d-icon d-icon-envelope svg-icon svg-node d-hover" xmlns="http://www.w3.org/2000/svg">\n\t<use xlink:href="#envelope"></use></svg></button>'.replace("\n"," ");r.innerHTML+=i,function(t,e){t.addEventListener("click",(function(){window.location.href=`http://devforum.roblox.com/new-message?username=${e}`}),!1)}(w(r,"envelope"),e)}(t,o.username),t.parentElement.classList.contains("group-Roblox_Staff")&&E(t,"staff")}(t),function(t){if(t.classList.contains("-!-has-user-flairs"))return;const e=t.getAttribute("data-user-id"),s=t.getAttribute("data-post-id"),n=t.getAttribute("data-topic-id");i[e]&&y(t,i[e]),l[s]&&y(t,l[s]),d[n]&&y(t,d[n]),t.className+=" -!-has-user-flairs"}(t)}window.addEventListener("load",(function(){setInterval((()=>{for(let t of document.getElementsByTagName("article"))$(t);for(let t of document.getElementsByClassName("d-editor-input"))e(t);for(let t of document.getElementsByClassName("flag-message"))e(t)}),1e3)}))})();